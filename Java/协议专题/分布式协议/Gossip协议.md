## 一 什么是Gossip协议
Gossip协议，也叫做流言协议，是一种分布式最终一致性协议或者分布式信息传播协议，可以用于通信、数据同步等等场景

## 二 Gossip协议工作流程
✅ 当需要同步或者周期性同步的节点，会在相邻节点选择K个节点进行发送自己知道的信息  
✅ 接收到消息的节点，更新自己本地消息，如果该消息之前已经接受过，处于removed状态，该节点不会继续传播这个消息  
✅ 否则还会继续在相邻节点选择K个节点进行发送，重复1-2步骤  
✅ 在未来的某一时刻，整个集群内的所有节点都会收到消息，完成数据同步，也就是完成最终一致  

## 三 Gossip协议工作模式
### 3.1 Push模式
Push模式就是A节点将自己数据推送到B节点  

### 3.2 Pull模式
Pull模式就是A节点从B节点拉取数据，一般用于自己是新节点，没有数据，需要从别的节点拉取数据  

### 3.3 Push & Pull模式
Push & Pull模式指的是A节点将自己数据推送到B节点，并且从B节点Pull数据  

## 四 Gossip协议需要解决哪些问题
### 4.1 节点发现和加入网络
✅ 第一: 第一个新节点加入网络，他首先需要发现节点和连接节点  
✅ 第二: 可以通过配置预定义一些种子节点，然后与种子节点连接，获取集群内的节点信息  
✅ 第三: 然后在和其他节点建立连接  
✅ 第四: 加入网络后，该节点需要自己维护一个节点列表，用于记录网络中其他节点的信息  

### 4.2 信息交换和传播
✅ 第一: 选择相邻节点  
✅ 第二:确定需要传播的信息或者数据  
✅ 第三:开始向邻居节点发送数据  
✅ 第四:其他节点接收和更新数据，并且重复前面步骤  

### 4.3 节点状态更新和维护
✅ 第一: 每一个节点可能会维护一些状态数据，当节点自身状态发生变化，需要告知其他节点  
✅ 第二: 随机选择临近节点进行传播  
✅ 第三: 定期重复更新和维护  


## 五 Gossip协议的优缺点
### 5.1 优点
#### 5.1.1 容错性强
✅ 对网络的稳定性要去不高，当某一个节点因为网络问题当前节点没有同步成功，可能会被其他节点同步成功  

#### 5.1.2 扩展性强
✅ 增加或者减少节点很方便  

#### 5.1.3 去中心化
✅ 因为去中心化，没有中心节点或者主节点概念，所以任意一个节点挂了都没事  

### 5.2 缺点
✅ 第一: 达成最终一致性的时间不好确定  
✅ 第二: 消息同步过程中具有一定的延迟，同步过程中，数据可能存在不一致的场景  
✅ 第三: 传播消息的时候，对网络压力大  
✅ 第四: 不允许存在恶意节点  

六 使用场景
6.1 可以实现负载均衡、故障恢复等场景
6.2 分布式存储系统，数据复制和数据一致性维护
6.3 区块链网络、分布式账本技术等

七 Redis Cluster为什么使用Gossip协议
第一: Redis Cluster是去中心话的集群，而Gossip协议刚好适合去中心化的场景
第二: Gossip协议方便进行失败检测，那么Redis Cluster失败检测的功能
