## 一 什么是udp协议，有什么特点?
**UDP是一个面向数据报文的、不可靠的传输协议**，主要特点包括:  
✅ UDP是一个面向数据报文的、无连接的传输协议  
✅ UDP是不可靠传输协议  
✅ UDP首部开销小  
✅ UDP没有网络拥塞控制  

## 二 UDP为什么会丢包？解决办法
### 2.1 UDP为什么会丢包
✅ UDP协议本身就是不可靠的协议，所以当出现网络拥塞，带宽限制等问题，就可能导致丢包

### 2.2 解决办法
✅ 由于 UDP 本身不提供重传机制，应用层可以设计自己的重传逻辑
✅ 调整发送速率
✅ 优化接收端缓冲区
✅ UDP冗余传输: 一般采用较多的是延时双发，双发指的是将原本单发的前后连续的两个包合并成一个大包发送，这样发送的数据量是原来的两倍。

## 三 粘包和拆包
### 3.1 UDP是否存在粘包和拆包问题？为什么？
✅ UDP协议不是面向字节的，而是面向报文的，UDP发送数据是一份一份的，接收的时候也是一份一份的，所以不存在粘包和拆包问题  

### 3.2 接收缓冲区如何 区别 缓冲区里的数据呢？
✅ 和TCP协议不同，UDP协议接收缓冲区是通过链表实现，通过链式存储结构存储UDP数据报  
✅ 所以它具有保护消息边界的特性  

### 3.3 那如果缓冲区满了，怎么办？
✅ 如果缓冲区满了，数据就会被丢失  
✅ 所以UDP适合一些发送频繁，且数据包比较小，对安全性不高的网络应用。如果数据包比较大，很容易造成频繁丢包  

## 四 UDP 如何实现可靠传输？
### 4.1 应用层自实现
✅ 定义序列号: 给每个数据包编号，接收方按序重排  
✅ 确认机制(ACK): 接收方接收后回传 ACK，发送方才认为成功  
✅ 超时重传:应用层实现超时重传机制，在一定时间内未收到确认的情况下，重发数据包  
✅ 校验和: UDP 自带校验和，用于检测数据包是否在传输过程中被损坏。应用层可以基于此进行数据校验，并请求重新发送损坏的数据包  


## 4.2 使用 Forward Error Correction（FEC）前向纠错
✅ 冗余编码：发送方将多个数据块编码成冗余数据  
✅ 即使中间部分丢失，接收方也可以恢复原始数据  
✅ 不需要重传（适用于视频流） 

### 4.3 基于 UDP 的可靠传输协议
基于别人已经封装好的协议，QUIC 或者KCP等等  

## 五 在 UDP 通信中，如何防止数据包被伪造或篡改？
✅ 校验和：UDP 自带的校验和可以检测数据包在传输过程中是否被损坏，但无法防止伪造  
✅ 应用层加密和签名：在应用层实现数据加密和数字签名，可以防止数据被篡改或伪造。例如，使用 TLS/DTLS 等加密协议，可以确保数据的机密性和完整性

## 六 TCP协议和UDP协议比较
✅ TCP是面向连接，而UDP面向的是无连接  
✅ TCP面向的是字节流; 而UDP面向的是数据报文  
✅ TCP是可靠传输协议; UDP是不可靠传输协议  
✅ TCP会处理拥塞控制;UDP不会进行拥塞控制  
✅ TCP是点对点传输;UDP可以一对一, 一对多和多对多传输  
✅ TCP首部开销大;UDP首部开销小  